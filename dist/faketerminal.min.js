!function(a){a.fakeTerminal||(a.fakeTerminal={}),a.fakeTerminal.command||(a.fakeTerminal.command={}),a.fakeTerminal.fakeTerminal=function(b,c){var d=this;return d.$el=a(b),d.el=b,d.$el.data("fakeTerminal.fakeTerminal",d),d.originalHtml="",d.existing="",d.commands=[],d.history=[],d.historyIndex=null,d.exitCode=-1,d.watchExitCode=null,d.theHeader=null,d.theScreen=null,d.theCommand=null,d.thePrompt=null,d.theInput=null,d.theRequestInput=null,d.__construct=function(){d.options=a.extend({},a.fakeTerminal.fakeTerminal.defaultOptions,c),d.originalHtml=d.el.outerHTML,d.setup(),d.registerCommands(),d.focusCommandInput();for(var b=0;b<d.options.initCommands.length;b++)d.setCommandInput(d.options.initCommands[b]),d.enterCommandInput();d.theHeader.find(".ft-header-button-close").on("click",function(){d.options.onClose(d)}),d.theHeader.find(".ft-header-button-minimise").on("click",function(){d.options.onMinimise(d)}),d.theHeader.find(".ft-header-button-maximise").on("click",function(){d.options.onMaximise(d)})},d.setup=function(){d.$el.addClass("faketerminal"),d.$el.addClass("faketerminal-theme-"+d.options.theme),d.existing=d.$el.html().split("\n");var b,c,e,f,g,h,i,j;b=a("<div>").addClass("ft-header"),c=a("<ul>").addClass("ft-header-buttons"),e=[],e[0]=a("<li>").addClass("ft-header-button ft-header-button-close").text("Ã—"),e[1]=a("<li>").addClass("ft-header-button ft-header-button-minimise").text("-"),e[2]=a("<li>").addClass("ft-header-button ft-header-button-maximise").text("+"),f=a("<ul>"),g=a("<li>").addClass("ft-command"),h=a("<span>").addClass("ft-prompt"),i=a("<span>").addClass("ft-input").prop("contenteditable",!0),j=a("<span>").addClass("ft-request-input").prop("contenteditable",!0),d.$el.empty().append(b.append(c.append(e[0]).append(e[1]).append(e[2]))).append(f.append(g.append(h).append(i).append(j))),d.theHeader=d.$el.find(">.ft-header"),d.theScreen=d.$el.find(">ul"),d.theCommand=d.theScreen.find("li.ft-command"),d.thePrompt=d.theCommand.find(".ft-prompt"),d.theInput=d.theCommand.find(".ft-input"),d.theRequestInput=d.theCommand.find(".ft-request-input"),d.setPrompt(),d.theInput.on("keydown",function(a){switch(a.keyCode){case 13:d.options.onUserEnterCommand(d,d.getCommandInput()),d.enterCommandInput();break;case 38:d.browseHistory("UP");break;case 40:d.browseHistory("DOWN");break;case 67:a.ctrlKey&&d.ctrl("C");break;case 85:a.ctrlKey&&d.ctrl("U")}}),d.theInput.on("keyup",function(a){switch(a.keyCode){case 13:d.setCommandInput("")}}),d.theRequestInput.on("keyup",function(a){switch(a.keyCode){case 13:d.setRequestInput("")}}),d.$el.on("click",function(){d.theInput.is(":visible")?d.focusCommandInput():d.theRequestInput.is(":visible")&&d.focusRequestInput()}),a.each(d.existing,function(a,b){d.addLine(b)})},d.registerCommands=function(){"object"==typeof a.fakeTerminal.command&&a.each(a.fakeTerminal.command,function(a,b){d.commands[a]=new b(d)})},d.commandHide=function(){d.theCommand.hide()},d.commandShow=function(){d.theCommand.show()},d.setPrompt=function(b,c,e){b=void 0===b||0===a.trim(b).length?d.options.hostname:b,c=void 0===c||0===a.trim(c).length?d.options.username:c,e=void 0===e||0===a.trim(e).length?d.options.initDir:e,c=c.toLowerCase().replace(/[^a-z0-9]/g,"");var f=b+":"+e+" "+c+"$ ";d.setPromptStr(f)},d.setPromptStr=function(a){d.thePrompt.html(a),d.theInput.css("padding-left",d.thePrompt.outerWidth()),d.theRequestInput.css("padding-left",d.thePrompt.outerWidth())},d.getPrompt=function(){return d.thePrompt.text()},d.addLine=function(b){b=a.parseHTML(b);var c="",e="";a(b).each(function(b,d){3===a(d).get(0).nodeType?e=a(d).get(0).nodeValue.replace(/ /g,"&nbsp;"):(a(d).html(a(d).text().replace(/ /g,"&nbsp;")),e=a(d).prop("outerHTML")),c+=e});var f=a("<li>").html(c);return d.theCommand.before(f),d.scrollTerminalToBottom(),d},d.scrollTerminalToBottom=function(){var b=0;a.each(d.theScreen.find(">li"),function(c){b+=a(this).outerHeight()}),d.theScreen.scrollTop(b)},d.browseHistory=function(a){"UP"===a?(null===d.historyIndex&&(d.historyIndex=d.history.length),--d.historyIndex<0&&(d.historyIndex=0)):"DOWN"===a&&(null===d.historyIndex&&(d.historyIndex=0),++d.historyIndex>=d.history.length&&(d.historyIndex=d.history.length));var b=d.history[d.historyIndex]||"";return d.setCommandInput(b),d},d.enterCommandInput=function(b){var c,e,f;return c=d.getCommandInput(),d.theInput.empty(),d.addLine(d.getPrompt()+c),e=c.split(" ").slice(0,1),e=a.trim(e),f=c.split(" ").slice(1),"object"==typeof d.commands[e]?(d.commandHide(),d.exitCode=null,d.watchExitCode=setInterval(function(){null!==d.exitCode&&(clearInterval(d.watchExitCode),d.commandShow(),d.focusCommandInput(),d.scrollTerminalToBottom(),d.exitCode="")},50),d.commands[e].execute(f,d)):e.length>0&&d.addLine('command not found: "'+e+'"'),!b&&c.length>0&&d.history.push(c),d.historyIndex=null,d.options.onEnterCommand(d,c),d},d.setCommandInput=function(a){return d.theInput.text(a),d},d.getCommandInput=function(){return a.trim(d.theInput.text())},d.focusCommandInput=function(){return d.theCommand.removeClass("ft-request-input"),d.theInput.empty().focus(),d},d.requestInput=function(b,c,e,f){var g,h;d.commandShow(),d.theCommand.addClass("ft-request-input"),g='<span class="ft-info">?</span> '+b+": ",g+='<span class="ft-mute">('+c+")</span>",d.setPromptStr(g),d.focusRequestInput(),d.theRequestInput.off("keydown"),d.theRequestInput.on("keydown",function(b){switch(h=!0,b.keyCode){case 13:d.options.onUserEnterInput(d,d.getRequestInput()),d.focusCommandInput(),d.setPrompt(),d.commandHide(),value=a.trim(d.theRequestInput.text()),0===value.length&&(value=c),f[e](value),h=!1;break;case 67:b.ctrlKey&&d.ctrlC()}return h})},d.setRequestInput=function(a){return d.theRequestInput.text(a),d},d.getRequestInput=function(){return a.trim(d.theRequestInput.text())},d.focusRequestInput=function(){return d.theCommand.addClass("ft-request-input"),d.theRequestInput.empty().focus(),d},d.ctrl=function(a){switch(a){case"C":d.ctrlC();break;case"U":d.ctrlU()}},d.ctrlC=function(){d.setPrompt(),null===d.exitCode?(d.exitCode="",d.addLine("^C")):d.addLine(d.getPrompt()+d.getCommandInput()),d.focusCommandInput()},d.ctrlU=function(){d.setCommandInput("")},d.destroy=function(){return d.$el.replaceWith(a(d.originalHtml)),d},d.exec=function(b,c){if(a.isArray(b))for(var e=0,f=b.length;e<f;e++)d.exec(b[e],c);else d.setCommandInput(b),d.enterCommandInput(c);return d},d.__construct(),d},a.fakeTerminal.fakeTerminal.defaultOptions={theme:"default",username:"root",hostname:window.location.host,historyLength:1e3,initCommands:[],initDir:"~",onEnterCommand:function(a,b){},onUserEnterCommand:function(a,b){},onUserEnterInput:function(a,b){},onClose:function(a){},onMinimise:function(a){},onMaximise:function(a){}},a.fakeTerminal.command._base=function(a){var b=this;b.info=function(){return{private:!0}},b.execute=function(a){return[]},b.exit=function(b){a.exitCode=parseInt(b,10)}},a.fn.faketerminal=function(b){return this.each(function(){a(this).data("instance",new a.fakeTerminal.fakeTerminal(this,b))})}}(jQuery),function(a){a.fakeTerminal||(a.fakeTerminal={}),a.fakeTerminal.command||(a.fakeTerminal.command={}),a.fakeTerminal.command.clear=function(b){a.fakeTerminal.command._base.apply(this,arguments);var c=this;return c.info=function(){return{description:"Clears the screen"}},c.execute=function(a){return b.theScreen.find("li:not(.ft-command)").remove(),c.exit(0),c},c}}(jQuery),function(a){a.fakeTerminal||(a.fakeTerminal={}),a.fakeTerminal.command||(a.fakeTerminal.command={}),a.fakeTerminal.command.echo=function(b){a.fakeTerminal.command._base.apply(this,arguments);var c=this;return c.info=function(){return{description:"Writes an argument to the standard output"}},c.execute=function(d){var e;return e=d.join(" "),e=a.trim(e),e=e.replace(/["']/g,""),e=e.replace(/["']/g,""),0===e.length&&(e=" "),b.addLine(e),c.exit(0),c},c}}(jQuery),function(a){a.fakeTerminal||(a.fakeTerminal={}),a.fakeTerminal.command||(a.fakeTerminal.command={}),a.fakeTerminal.command.help=function(b){a.fakeTerminal.command._base.apply(this,arguments);var c=this;return c.info=function(){return{description:"Displays information about the available commands"}},c.execute=function(d){var e,f=[],g={};if(0===d.length){f.push('The following commands are available, run <span class="ft-info">help [command]</span> to find out more.'),f.push(" ");var h="";a.each(a.fakeTerminal.command,function(c,d){var e=new a.fakeTerminal.command[c](b);"function"==typeof e.info&&(g=e.info(),"boolean"==typeof g.private&&!0===g.private)||(h+=c+"    ")}),f.push(h),f.push(" ")}else{var i=d[0],j=!1;a.each(a.fakeTerminal.command,function(a,b){a===i&&(j=!0)}),j?(e=new a.fakeTerminal.command[i](b),"function"==typeof e.info&&(g=e.info(),"string"==typeof g.description?f=[" ",i+" -- "+g.description," "]:"object"==typeof g.description&&(f=g.description)),0===f.length&&(f=[" ",'No description for "'+i+'"'," "])):f=[" ",'"'+i+'" is not a valid command'," "]}for(var k=0;k<f.length;k++)b.addLine(f[k]);return c.exit(0),c},c},a.fakeTerminal.command.man=function(){return a.fakeTerminal.command.help.apply(this,arguments),this}}(jQuery),function(a){a.fakeTerminal||(a.fakeTerminal={}),a.fakeTerminal.command||(a.fakeTerminal.command={}),a.fakeTerminal.command.history=function(b){a.fakeTerminal.command._base.apply(this,arguments);var c=this;return c.info=function(){return{description:"Displays the command history, up to "+b.options.historyLength+" items"}},c.execute=function(a){b.addLine("  ");for(var d=0;d<b.history.length;d++)b.addLine(d+"  "+b.history[d]);return b.addLine("  "),c.exit(0),c},c}}(jQuery);
//# sourceMappingURL=faketerminal.min.js.map